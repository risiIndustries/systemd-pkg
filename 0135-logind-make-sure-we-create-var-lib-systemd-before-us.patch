From a94dce17411ac4bf5d111beaa640b909033b62f7 Mon Sep 17 00:00:00 2001
From: Lennart Poettering <lennart@poettering.net>
Date: Fri, 27 Jan 2012 20:48:28 +0100
Subject: [PATCH] logind: make sure we create /var/lib/systemd before using it
 (cherry picked from commit
 02b16a19a4f786f63ad6f4e8f6e185b41c9ca386)

---
 src/logind-dbus.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/src/logind-dbus.c b/src/logind-dbus.c
index efbc040..48b8c36 100644
--- a/src/logind-dbus.c
+++ b/src/logind-dbus.c
@@ -1188,6 +1188,8 @@ static DBusHandlerResult manager_message_handler(
                 if (r < 0)
                         return bus_send_error_reply(connection, message, &error, r);
 
+                mkdir_p("/var/lib/systemd", 0755);
+
                 r = safe_mkdir("/var/lib/systemd/linger", 0755, 0, 0);
                 if (r < 0)
                         return bus_send_error_reply(connection, message, &error, r);
